<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WebSocket: Say Hello</title>
	 <link rel="stylesheet" type="text/css" href="wsStyle.css" />
    <script type="text/javascript">
      var websocket = null;

      function connect() {
        var wsURI = 'ws://localhost:6875/pixet/';
        websocket = new WebSocket(wsURI);
        websocket.onopen = function() {
            displayStatus('Open');
            document.getElementById('sayHello').disabled = false;
            displayMessage('Connection is now open. Type a name and click Say Hello to send a message.');
        };
        websocket.onmessage = function(event) {
            displayMessage('The response was received! ' + event.data, 'success');
        };
        websocket.onerror = function(event) {
            displayMessage('Error! ' + event.data, 'error');
        };
        websocket.onclose = function() {
            displayStatus('Closed');
            displayMessage('The connection was closed or timed out. Please click the Open Connection button to reconnect.');
            document.getElementById('sayHello').disabled = true;
        };
      }

      function disconnect() {
        if (websocket !== null) {
            websocket.close();
            websocket = null;
        }
        var message = document.getElementById('hellomessage');
        message.setAttribute("class", "message");
        message.textContent = 'WebSocket closed.';
      }

      function sendMessage() {
        if (websocket !== null) {
            var content = document.getElementById('name').value;
            websocket.send(content);
        } else {
            displayMessage('WebSocket connection is not established. Please click the Open Connection button.', 'error');
        }
      }

      function displayMessage(data, style) {
        var message = document.getElementById('hellomessage');
        message.setAttribute("class", style);
		message.innerHTML += '<br>' + data;
      }

      function displayStatus(status) {
        var currentStatus = document.getElementById('currentstatus');
        currentStatus.textContent = status;
      }
    </script>
  </head>
  <body>
    <div id="container">
      <h1>Welcome to WebSocket Server and Client Application</h1>
      <div class="subtitle">This is a simple example of a Jakarta WebSocket implementation.</div>
      <div id="connect-container">
        <div>
          <fieldset>
            <legend>Connect or disconnect using WebSocket:</legend>
            <input type="button" id="connect" onclick="connect();" value="Open Connection" />
            <input type="button" id="disconnect" onclick="disconnect();" value="Close Connection" />
          </fieldset>
        </div>
        <div>
          <fieldset>
            <legend>Type your name below, then click the `Say Hello` button:</legend>
            <label for="name">Your Name:</label>
            <input id="name" type="text" size="40" placeholder="Enter your name" />
            <input type="button" id="sayHello" onclick="sendMessage();" value="Say Hello" disabled="disabled" />
          </fieldset>
        </div>
        <div>Current WebSocket Connection Status: <span id="currentstatus" class="message">Closed</span></div>
        <div>
          <span id="hellomessage"></span>
        </div>
      </div>
    </div>
  </body>
</html>
